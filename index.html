<!DOCTYPE html>
<html>
<head>
<meta charset='UTF-8'>
<title>CManLH's Blog</title>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link href="http://7xifrq.com1.z0.glb.clouddn.com/bootstrap/css/bootstrap.min.css" rel="stylesheet">
<link href="css/main.css" rel="stylesheet">
</head>
<body>
	<div class="container-fluid">
		<div class="row">
			<div class="col-xs-12 col-sm-4 col-md-3 col-lg-3 hidden-xs controller-container">
				<div class="row">
					<div class="visible-lg-4 col-lg-5"></div>
					<div class="col-xs-12 col-sm-12 col-md-12 col-lg-7 controller">
						hello<br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br>
						<br> <br> <br>world navigation
					</div>
				</div>
			</div>
			<div class="col-xs-12 col-sm-8 col-md-9 col-lg-9 blackboard">
				<div class="row">
					<div class="col-xs-12 col-sm-12 col-md-12 col-lg-10">
						<div class="show list"></div>
						<div class="hidden article">
							<div class="header">
								<h3 class="text-center"></h3>
								<small class="pull-right"></small>
							</div>
							<div class="content"></div>
							<span class="closeBtn"><a>âœ–</a></span>
						</div>
					</div>
					<div class="visible-lg-2 col-lg-2"></div>
				</div>
			</div>
		</div>
	</div>
</body>
<script type="text/javascript" src="http://7xifrq.com1.z0.glb.clouddn.com/jquery.min.js"></script>
<script type="text/javascript" src="http://7xifrq.com1.z0.glb.clouddn.com/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/main.js"></script>
<script>
	function parseData(data) {
		var splittedData = data.split("-");
		return {
			time : splittedData[0],
			title : splittedData[1]
		};
	}
	$.ajax({
		url : "https://api.github.com/repos/cmanlh/cmanlh.github.io/contents/post/html",
		success : function(data) {
			var cnt = data.length;
			for (var i = cnt - 1; i >= 0; i--) {
				var realData = parseData(data[i].name);
				$(".list").append(
						"<blockquote><h4 link='"+realData.time+"'><a>" + realData.title
								+ "</a></h4><small class='pull-right'>"
								+ new Date(parseInt(realData.time, 10)).toLocaleString() + "</small></blockquote>");
				localStorage.setItem(realData.time, data[i].path);
			}
		}
	});

	$(".closeBtn").on("click", function(e) {
		$(".list").toggleClass("show hidden");
		$(".article").toggleClass("show hidden");
	});

	$(".list").on("click", function(e) {
		var target;
		switch (e.target.tagName) {
		case "H4":
			target = e.target;
			break;
		case "SMALL":
			target = e.target.previousSibling;
			break;
		case "BLOCKQUOTE":
			target = e.target.firstChild;
			break;
		case "A":
			target = e.target.parentElement;
			break;
		default:
			target = null;
		}

		if (target) {
			$.ajax({
				url : "http://cmanlh.github.io/" + localStorage.getItem($(target).attr("link")),
				success : function(data) {
					$(".article h3").html(target.firstChild.innerHTML);
					$(".article small").html(target.nextSibling.innerHTML);
					$(".article .content").empty();
					$(".article .content").append(data);
					$(".list").toggleClass("show hidden");
					$(".article").toggleClass("show hidden");
				}
			});
		}
	});
</script>
</html>
